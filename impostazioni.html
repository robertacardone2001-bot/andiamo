<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Impostazioni</title>

  <style>
    body {
      font-family: Inter, sans-serif;
      background: #f4f4eb;
      padding: 20px;
      color: #2f3120;
    }
    h1 { font-size: 26px; margin-bottom: 10px; }

    .setting {
      background: #fff;
      padding: 16px;
      border-radius: 12px;
      margin-top: 15px;
      border: 1px solid #d6dec1;
    }
    label { display:block; margin-bottom:6px; font-weight:600; }
    select, input {
      padding: 8px;
      width: 100%;
      border-radius: 8px;
      border: 1px solid #aaa;
      font-size: 15px;
    }
    button {
      margin-top: 10px;
      padding: 8px 14px;
      background: #6b8e23;
      border: none;
      border-radius: 8px;
      color: #fff;
      cursor: pointer;
    }
    button:hover { background:#556b2f; }
  </style>
</head>

<body>

  <h1>⚙️ Impostazioni</h1>

  <!-- SKIP -->
  <div class="setting">
    <label>Quanto vuoi andare avanti/indietro alla volta?</label>
    <select id="skipSelect">
      <option value="5">5 secondi</option>
      <option value="10">10 secondi</option>
      <option value="15">15 secondi</option>
      <option value="30">30 secondi</option>
    </select>
    <button onclick="saveSkip()">Salva</button>
  </div>

  <!-- TIMER -->
  <div class="setting">
    <label>Timer di spegnimento (minuti)</label>
    <input type="number" id="timerInput" min="1" placeholder="Esempio: 10">
    <button onclick="saveTimer()">Salva</button>
  </div>

  <!-- STATISTICHE -->
  <div class="setting">
    <label>Statistiche</label>
    <p id="statsBox">Caricamento...</p>
  </div>

<script>
  // Carica i valori all’apertura della pagina
  window.onload = () => {
    document.getElementById("skipSelect").value =
      localStorage.getItem("settings::skip") || 10;

    const timer = localStorage.getItem("settings::timer");
    if (timer) document.getElementById("timerInput").value = timer;

    loadStats();
  };

  function saveSkip() {
    const v = document.getElementById("skipSelect").value;
    localStorage.setItem("settings::skip", v);
    alert("Impostazione salvata!");
  }

  function saveTimer() {
    const v = document.getElementById("timerInput").value;
    if (!v || v <= 0) return alert("Inserisci un valore valido!");
    localStorage.setItem("settings::timer", v);
    alert("Timer salvato!");
  }

  function loadStats() {
    const done = Object.keys(localStorage)
      .filter(k => k.startsWith("listened::")).length;

    const started = Object.keys(localStorage)
      .filter(k => k.startsWith("started::")).length;

    document.getElementById("statsBox").innerHTML =
      `Capitoli completati: <b>${done}</b><br>
       Capitoli iniziati: <b>${started}</b>`;
  }
</script>

</body>
</html>
